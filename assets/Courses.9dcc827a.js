import{j as e,d as r,r as y,F as g}from"./vendor.07a30449.js";import{B as H,g as l,A as p}from"./index.d60a0a5e.js";import{u as I,a as A,C as N}from"./Card.9d72600a.js";import{M as k,T as t,P as S}from"./Modal.07453fb5.js";import{S as T}from"./index.29c50f19.js";import"./motion.b8bd9615.js";const{Option:j}=T,v=({modalObj:o,editValue:s,setEditValue:m})=>e(k,{...o,modalWidth:"700px",children:r("div",{className:"modal-body one-col-grid",children:[r("fieldset",{className:"form-group",children:[e("label",{children:"Name"}),e("input",{type:"text",value:s.name,onChange:d=>m({...s,name:d.target.value}),className:"form-control",placeholder:"Name",required:!0})]}),r("fieldset",{className:"form-group",children:[e("label",{children:"Types"}),s.types.length!=0&&e(T,{mode:"tags",loading:s.types?.length===0,size:"large",defaultValue:s.types.map(d=>d.name),placeholder:"Please select",onChange:d=>m({...s,types:d}),style:{width:"100%"},children:s.types?.map((d,i)=>e(j,{selected:!0,value:d.name,checked:!0,children:d.name},i))})]})]})}),B=()=>{const[o,s]=y.exports.useState({formId:"staff-member-form-edit",modalId:"staff-member-modal-edit",title:"Edit Course",visible:!1}),{isLoading:m,callback:d}=I(),{data:i,setData:f,loadingDone:C}=A({method:"get",url:p}),[n,u]=y.exports.useState({name:"",types:[]});function w(){n.types.length>0&&(n.types=n.types.map(a=>({name:a.name?a.name:a}))),d({method:"put",url:p+"/"+n._id,data:n,success:a=>{window.Notify({status:"success",message:"Course Updated Successfully"}),window.$(`#${o.modalId}`).modal("hide");let c={...n,...a.data};t.fn.updateTableWithId(i,c,f,"_id")},error:a=>{window.$(`#${o.modalId}`).modal("hide")}})}function x(a){let c=a.types;u({...a,types:[]}),setTimeout(()=>{u({...a,types:c})},100),s({...o,visible:!0}),window.$(`#${o.modalId}`).modal("show"),window.$(`#${o.formId}`).off("submit")}return r(g,{children:[e(H,{title:"Courses",links:[{name:"Home",link:"/admin"},{name:"Courses",link:"/admin/courses"}]}),e(N,{title:"Courses",button:{name:"Add",link:"courses-add"},children:r(t,{tableId:".table-brand-staff",loadingDone:C,children:[e(t.Header,{children:r(t.Row,{children:[e(t.TH,{children:"Id"}),e(t.TH,{children:"Name"}),e(t.TH,{children:"Types"}),e(t.TH,{children:"Created At"}),e(t.TH,{children:"Updated At"}),e(t.TH,{children:"Actions"})]})}),e(t.Body,{children:i&&i.map((a,c)=>r(t.Row,{children:[e(t.TH,{children:l(()=>a._id)}),e(t.TH,{children:l(()=>a.name)}),e(t.TH,{children:l(()=>e(g,{children:a.types.map((h,b)=>e("div",{children:h.name},b))}))}),e(t.TH,{children:l(()=>new Date(a.createdAt).toIndiaDate())}),e(t.TH,{children:l(()=>new Date(a.updatedAt).toIndiaDate())}),r(t.TH,{children:[e("i",{className:"feather icon-edit cursor-pointer",onClick:()=>x(a)}),e(S,{title:"Are you sure to delete this Course?",onConfirm:()=>new Promise(h=>{d({method:"delete",url:p+"/"+a._id,success:b=>(t.fn.deleteTableWithId(i,a,f,"_id"),window.Notify({status:"success",message:"Course Deleted Successfully"}),h())})}),okText:"Yes",cancelText:"No",children:e("i",{className:"feather pl-1 icon-trash cursor-pointer text-danger"})})]})]},a.id))})]})}),e(v,{editValue:n,setEditValue:u,modalObj:{...o,onSubmit:w,isLoading:m}})]})};export{B as default};
